<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="row-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Help! Linux Ate My RAM - LinuxAteMyRAM.com</title>
        <link rel="stylesheet" href="assets/css/app.css">
    </head>
    <body>
        <div class="container">
            <header id="header">
                <nav>
                    <ul>
                        <li><a href="fr/index.html">Fran√ßais</a></li>
                        <li><a href="index.html">English</a></li>
                    </ul>
                </nav>
                <h1>Linux Ate my RAM!</h1>
                <img src="assets/img/atemyram.png" alt="Help! Linux Ate my RAM!">
                <p id="blink">
                    Don't Panic! Your ram is fine!
                </p>
            </header>
            <main>
                <h2>What's going on?</h2>
                <p>
                    Linux is borrowing unused memory for disk caching. This makes it
                    looks like you are low on memory, but you are not! Everything is
                    fine!
                </p>

                <h2>Why is it doing this?</h2>
                <p>
                    Disk caching makes the system much faster and more responsive!
                    There are no downsides, except for confusing newbies. It does
                    not take memory away from applications in any way, ever!
                </p>

                <h2>What if I want to run more applications?</h2>
                <p>
                   If your applications want more memory, they just take back a
                   chunk that the disk cache borrowed. Disk cache can always be
                   given back to applications immediately! You are not low on ram!
                </p>

                <h2>Do I need more swap?</h2>
                <p>
                    No, disk caching only borrows the ram that applications don't
                    currently want. It will not use swap. If applications want more
                    memory, they just take it back from the disk cache. They will
                    not start swapping.
                </p>

                <h2>How do I stop Linux from doing this?</h2>
                <p>
                   You can't disable disk caching. The only reason anyone ever
                   wants to disable disk caching is because they think it takes
                   memory away from their applications, which it doesn't! Disk
                   cache makes applications load faster and run smoother, but it
                   <strong>NEVER EVER</strong> takes memory away from them!
                   Therefore, there's absolutely no reason to disable it!
                </p>

                <h2>Why does top and free say all my ram is used if it isn't?</h2>
                <p>
                    This is just a difference in terminology. Both you and Linux
                    agree that memory taken by applications is "used", while memory
                    that isn't used for anything is "free".
                </p>
                <p>
                    But how do you count memory that is currently used for
                    something, but can still be made available to applications?
                <p>
                </p>
                    You might count that memory as "free" and/or "available". Linux
                    instead counts it as "used", but also "available":
                </p>

                <table border="1">
                    <tr>
                        <th>Memory that is</th>
                        <th>You'd call it</th>
                        <th>Linux calls it</th>
                    </tr>
                    <tr>
                        <td class="red">used by applications</td>
                        <td class="red">Used</td>
                        <td class="red">Used</td>
                    </tr>
                    <tr>
                        <td class="yellow">used, but can be made available</td>
                        <td class="green">Free (or Available)</td>
                        <td class="red">Used (and Available)</td>
                    </tr>
                    <tr>
                        <td class="green">not used for anything</td>
                        <td class="green">Free</td>
                        <td class="green">Free</td>
                    </tr>
                </table>

                <p>
                    This "something" is (roughly) what top and free calls
                    "buffers" and "cached". Since your and Linux's terminology
                    differs, you might think you are low on ram when you're not.
                </p>

                <h2>How do I see how much free ram I really have?</h2>
                <p>
                    To see how much ram your applications could use without
                    swapping, run free -m and look at the "available" column:
                </p>
				<pre>
$ free -m
              total        used        free      shared  buff/cache   available
Mem:           1504        1491          13           0         855   <span class="green">792</span>
Swap:          2047           6        2041

                </pre>

                <p>
                    <em>Note: On installations from before 2016, look at "free"
                    column in the "-/+ buffers/cache" row instead.</em>
                </p>
                <p>
                    This is your answer in megabytes. If you just naively look
                    at "used" and "free", you'll think your ram is 99% full when
                    it's really just 47%!
                </p>
                <p>
                    For a more detailed and technical description of what Linux
                    counts as "available", see
                    <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=34e431b0ae398fc54ea69ff85ec700722c9da773">
                    the commit that added the field.
                    </a>
                </p>

                <h2>When should I start to worry?</h2>
                <p>
                    A <strong>healthy Linux system</strong> with more than enough
                    memory will, after running for a while, show the following
                    expected and harmless behavior:
                </p>
                <ul>
                    <li>free memory is close to 0</li>
                    <li>used memory is close to total</li>
                    <li>
                        available memory (or "free + buffers/cache") has enough
                        room (let's say, 20%+ of total)
                    </li>
                    <li>swap used does not change</li>
                </ul>
                <p>
                    <strong>Warning signs</strong> of a genuine low memory
                    situation that you may want to look into:
                </p>
                <ul>
                    <li>
                        available memory (or "free + buffers/cache") is close to
                        zero
                    </li>
                    <li>swap used increases or fluctuates</li>
                    <li>
                        dmesg | grep oom-killer shows the OutOfMemory-killer at
                        work
                    </li>
                </ul>

                <h2>How can I verify these things?</h2>
                <p>
                    See
                    <a href="play.html">this page</a>
                    for more details and how you can experiment with disk cache
                    to show the effects described here. Few things make you
                    appreciate disk caching more than measuring an
                    order-of-magnitude speedup on your own hardware!
                </p>
            </main>
            <footer id="footer">
                <p>
                    LinuxAteMyRam.com was presented by
                    <a href="https://www.vidarholen.net/">VidarHolen.net</a>.
                    This website was coded by
                    <a href="https://www.vidarholen.net/">Vidar Holen</a>
                    and
                    <a href="https://www.dannycolin.com/">Danny Colin</a>.
                    To the extent possible under law, the persons who associated
                    <a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a>
                    with this work have waived all copyright and related or
                    neighboring rights to this work.
                    You can find the source code on
                    <a href="https://github.com/koalaman/linuxatemyram.com">GitHub</a>.
                    Feel free to contribute.
                </p>
            </footer>
        </div>
    </body>
</html>
